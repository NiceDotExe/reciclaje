(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"092e":function(t,e,a){},a07f:function(t,e,a){"use strict";var r=a("092e"),o=a.n(r);o.a},b7ba:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return 1==t.DetallesUsuario.admin?a("q-card",{staticClass:"q-ma-sm"},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Subir datos de pesaje")]),a("q-form",{on:{submit:t.onSubmit}},[a("label",[t._v("Seleccione Barrio")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.barrio,expression:"barrio"}],attrs:{placeholder:"barrio",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.barrio=e.target.multiple?a:a[0]}}},t._l(t.ListaBarrios,(function(e){return a("option",{key:e.id,domProps:{value:e.nombre}},[t._v(t._s(e.nombre))])})),0),a("q-input",{staticClass:"q-ma-sm",attrs:{type:"number",label:"Kg Plastico","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Completar"}]},model:{value:t.CantidadPlastico,callback:function(e){t.CantidadPlastico=e},expression:"CantidadPlastico"}}),a("q-input",{staticClass:"q-ma-sm",attrs:{type:"number",label:"Kg Papel","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Completar"}]},model:{value:t.CantidadPapel,callback:function(e){t.CantidadPapel=e},expression:"CantidadPapel"}}),a("q-input",{staticClass:"q-ma-sm",attrs:{type:"number",label:"Kg Vidrio","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Completar"}]},model:{value:t.CantidadVidrio,callback:function(e){t.CantidadVidrio=e},expression:"CantidadVidrio"}}),a("div",{staticClass:"text-center q-ma-md"},[a("q-btn",{attrs:{label:"Subir",type:"submit",color:"primary"}})],1)],1)],1),a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Subir datos desde archivo")]),a("excel")],1),a("q-card-section",{staticClass:"q-ma-sm"},[a("div",{staticClass:"text-h6"},[t._v("Añadir barrio")]),a("q-input",{attrs:{filled:"","bottom-slots":"",label:"Nuevo Barrio",counter:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"add_circle"},on:{click:t.Crearbarrio}})]},proxy:!0},{key:"hint",fn:function(){return[t._v("Solo añadir barrio , cuando no aparezca en la lista")]},proxy:!0}],null,!1,2271264435),model:{value:t.barrionuevo,callback:function(e){t.barrionuevo=e},expression:"barrionuevo"}})],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.prompt,callback:function(e){t.prompt=e},expression:"prompt"}},[a("q-card",{staticStyle:{"min-width":"350px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Verficacion")])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-input",{attrs:{dense:"",autofocus:""},model:{value:t.Codigo,callback:function(e){t.Codigo=e},expression:"Codigo"}}),a("p",[t._v(t._s(t.mensaje))])],1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{attrs:{flat:"",label:"Confirmar"},on:{click:t.comprobar}})],1)],1)],1)],1):t._e()},o=[],i=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("456d"),a("6b54"),a("06db"),a("c47a")),n=a.n(i),s=a("fc1b"),c=a("2f62"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[t._v("\n  Seleccione un archivo CSV\n  "),a("input",{staticClass:"q-ma-md",attrs:{type:"file",id:"csv_file",name:"csv_file"},on:{change:function(e){return t.loadCSV(e)}}}),t._l(t.parse_csv,(function(e,r){return a("div",{key:r},[r<5?a("p",[t._v("\n      Barrio: "+t._s(e.BARRIO)+" papel: "+t._s(e.PAPEL)+" vidrio: "+t._s(e.VIDRIO)+" plastico: "+t._s(e.PLASTICO)+"\n    ")]):t._e()])})),a("div",{staticClass:"q-ma-md"},[a("q-btn",{attrs:{color:"primary",label:"SUBIR"},on:{click:t.subir}})],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.prompt,callback:function(e){t.prompt=e},expression:"prompt"}},[a("q-card",{staticStyle:{"min-width":"350px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Verficacion")])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-input",{attrs:{dense:"",autofocus:""},model:{value:t.Codigo,callback:function(e){t.Codigo=e},expression:"Codigo"}}),a("p",[t._v(t._s(t.mensaje))])],1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{attrs:{flat:"",label:"Confirmar"},on:{click:t.comprobar}})],1)],1)],1)],2)},p=[];a("a481"),a("28a5"),a("7f7f");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){n()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var b={data:function(){return{channel_name:"",channel_fields:[],channel_entries:[],parse_header:[],parse_csv:[],sortOrders:{},sortKey:"",prompt:!1,Codigo:"",mensaje:""}},computed:d({},Object(c["e"])("usuarios",["DetallesUsuario"])),methods:d({},Object(c["b"])("pesajes",["SubirDatos"]),{loadCSV:function(t){var e=this;if(window.FileReader){var a=new FileReader;a.readAsText(t.target.files[0]),a.onload=function(t){var a=t.target.result;e.parse_csv=e.csvJSON(a),console.log(e.parse_csv)},a.onerror=function(t){"NotReadableError"==t.target.error.name&&alert("Canno't read file !")}}else alert("FileReader are not supported in this browser.")},csvJSON:function(t){var e=this,a=t.split("\n"),r=(a=t.split("\r"),[]),o=a[0].split(",");return e.parse_header=a[0].split(","),a[0].split(",").forEach((function(t){e.sortOrders[t]=1})),a.map((function(t,e){if(!(e<1)){var a={},i=t.split(",");o.map((function(t,e){a[t]=i[e]})),r.push(a)}})),r},subir:function(){this.prompt=!0},comprobar:function(){var t=this,e=new Date,a=parseInt(e.getMonth())+1,r=e.getFullYear();this.Codigo==this.DetallesUsuario.codigo?(this.prompt=!1,this.parse_csv.forEach((function(e){t.SubirDatos({barrio:e.BARRIO.toUpperCase().replace("\n",""),plastico:e.PLASTICO,vidrio:e.VIDRIO,papel:e.PAPEL,fecha:(new Date).toLocaleString(),mes:a.toString(),anho:r.toString()})})),this.codigo=""):this.mensaje="codigo erroneo"}})},f=b,m=a("2877"),v=a("eebe"),h=a.n(v),C=a("9c40"),g=a("24e8"),O=a("f09f"),y=a("a370"),_=a("27f9"),q=a("4b7e"),j=a("7f67"),P=Object(m["a"])(f,l,p,!1,null,null,null),S=P.exports;function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function x(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),!0).forEach((function(e){n()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}h()(P,"components",{QBtn:C["a"],QDialog:g["a"],QCard:O["a"],QCardSection:y["a"],QInput:_["a"],QCardActions:q["a"]}),h()(P,"directives",{ClosePopup:j["a"]});var D={data:function(){return{barrio:"",barrionuevo:"",CantidadPlastico:"",CantidadPapel:"",CantidadVidrio:"",alert:!1,confirm:!1,prompt:!1,mensaje:"",Codigo:""}},components:{excel:S},computed:x({},Object(c["c"])("pesajes",["ListaBarrios"]),{},Object(c["e"])("usuarios",["DetallesUsuario"])),methods:x({},Object(c["b"])("pesajes",["SubirDatos"]),{onSubmit:function(){this.prompt=!0},comprobar:function(){var t=new Date,e=parseInt(t.getMonth())+1,a=t.getFullYear();this.Codigo==this.DetallesUsuario.codigo?(this.prompt=!1,this.SubirDatos({barrio:this.barrio,plastico:this.CantidadPlastico,vidrio:this.CantidadVidrio,papel:this.CantidadPapel,fecha:(new Date).toLocaleString(),mes:e.toString(),anho:a.toString()}),this.barrio="",this.CantidadPlastico="",this.CantidadVidrio="",this.CantidadPapel="",this.codigo=""):this.mensaje="codigo erroneo"},Crearbarrio:function(){var t=this;""===this.barrio&&null===this.barrio||(s["b"].ref("barrios/"+this.barrionuevo.toUpperCase()).set({nombre:this.barrionuevo.toUpperCase()}).then((function(){t.$q.notify({message:"Hecho!",type:"positive"})})).catch((function(){t.$q.notify({message:"Falló!",type:"negative"})})),this.barrio="")},inicio:function(){}})},k=D,I=(a("a07f"),a("0378")),Q=a("0016"),V=Object(m["a"])(k,r,o,!1,null,null,null);e["default"]=V.exports;h()(V,"components",{QCard:O["a"],QCardSection:y["a"],QForm:I["a"],QInput:_["a"],QBtn:C["a"],QIcon:Q["a"],QDialog:g["a"],QCardActions:q["a"]}),h()(V,"directives",{ClosePopup:j["a"]})}}]);